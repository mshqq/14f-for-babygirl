<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–° –¥–Ω—ë–º —Å–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Lilita+One&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='img/favicon.ico') }}"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{{ url_for('static', filename='img/apple-touch-icon.png') }}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="{{ url_for('static', filename='img/favicon-16x16.png') }}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{{ url_for('static', filename='img/favicon-32x32.png') }}"
    />
    <link
      rel="manifest"
      href="{{ url_for('static', filename='img/site.webmanifest') }}"
    />
  </head>
  <body>
    <div class="container">
      <h1 id="question">–¢—ã —Å—Ç–∞–Ω–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</h1>
      <button id="yes" onclick="playVideo()">–î–∞</button>
      <button id="no" onclick="moveNoButton()">–ù–µ—Ç</button>
    </div>
    <video id="video">
      <source src="/static/video/video.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    <p id="afterMessage" style="display: none">love you babygirlüéâ</p>
    <script>
      let attempts = 0;

      // –ó–∞–ø—É—Å–∫ –≤–∏–¥–µ–æ
      function playVideo() {
        const question = document.getElementById("question");
        const yesButton = document.getElementById("yes");
        const noButton = document.getElementById("no");
        const video = document.getElementById("video");

        question.innerText = "‚ù§Ô∏è";

        if (yesButton) yesButton.style.display = "none";
        if (noButton) noButton.style.display = "none";
        document.querySelectorAll(".heart").forEach((heart) => heart.remove());

        video.style.display = "block";
        video.play();
      }

      function moveNoButton() {
        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–î–∞" –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –Ω–∞–∂–∏–º–∞—é—Ç "–ù–µ—Ç"
        increaseSize();

        if (attempts < 2) {
          let noButton = document.getElementById("no");
          let x = Math.random() * (window.innerWidth - 100);
          let y = Math.random() * (window.innerHeight - 50);
          noButton.style.position = "absolute";
          noButton.style.left = `${x}px`;
          noButton.style.top = `${y}px`;
          attempts++;
        } else {
          document.getElementById("no").remove();
          document.getElementById("question").innerText = "–ù—É –ø–æ–∂–∞–∞–∞–∞–ª—É–π—Å—Ç–∞";
        }
      }

      // –§—É–Ω–∫—Ü–∏—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ "–î–∞" –∏ –µ—ë —Ç–µ–∫—Å—Ç–∞
      function increaseSize() {
        const yesButton = document.getElementById("yes");

        // –¢–µ–∫—É—â–∏–µ —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–∫–∏
        let currentWidth = parseInt(window.getComputedStyle(yesButton).width);
        let currentHeight = parseInt(window.getComputedStyle(yesButton).height);
        let currentFontSize = parseInt(
          window.getComputedStyle(yesButton).fontSize
        );

        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º
        let newWidth = currentWidth * 1.5;
        let newHeight = currentHeight * 1.5;
        let newFontSize = currentFontSize * 1.5;

        yesButton.style.width = `${newWidth}px`;
        yesButton.style.height = `${newHeight}px`;
        yesButton.style.fontSize = `${newFontSize}px`;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–ª–ª–∏–∑–∏—é
        let x = Math.random() * (window.innerWidth - newWidth);
        let y = Math.random() * (window.innerHeight - newHeight);
        yesButton.style.left = `${x}px`;
        yesButton.style.top = `${y}px`;
      }

      // –ê–Ω–∏–º–∞—Ü–∏–∏ —Å–µ—Ä–¥–µ—Ü
      document.addEventListener("DOMContentLoaded", () => {
        const heartImage = "/static/img/heart.png";
        for (let i = 0; i < 20; i++) {
          let heart = document.createElement("div");
          heart.classList.add("heart");
          heart.style.left = `${Math.random() * 100}vw`;
          heart.style.animationDuration = `${Math.random() * 2 + 3}s`;
          heart.style.backgroundImage = `url(${heartImage})`;
          document.body.appendChild(heart);
        }
      });
      document.getElementById("video").addEventListener("ended", function () {
        document.getElementById("afterMessage").style.display = "block";
        let vid = document.getElementById("video");
        vid.style.display = "none";
        document.getElementById("question").style.fontSize = "150px";
      });
    </script>
  </body>
</html>
